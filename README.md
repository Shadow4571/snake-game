# SNAKE-GAME
_Simple snake game for university project._

Проект игры на библиотеках p5 и p5.sound.
Для запуска игры будет необходим [локальный сервер](https://github.com/processing/p5.js/wiki/Local-server "Инструкция по созданию локального сервера"), либо можно воспользоваться расширением для [Google Chrome](https://chrome.google.com/webstore/detail/web-server-for-chrome/ofhbbkphhbklhfoeikjpcbhemlocgigb/ "Расширение для создания локального сервера").

Игра содержит несколько глобальных менеджеров и сервисов:
1. Менеджер игровых состояний (Game States Manager)
2. Менеджер текстур (Texture Manager)
3. Менеджер рекордов (Records Manager)
4. Менеджер виджетов (Widget Manager)
5. Менеджер звуков (Sound Manager)
6. Сервис работы с куки (Cookie Service)
7. Менеджер/набор триггеров (Trigger Set)
8. Менеджер событий (Events Manager)
9. Менеджер еды (Foods Manager)

### 1. Game States Manager
Менеджер игровых состояний может переключать глобальные состояния игры, например, меню - одно состояние при котором необходимо отобразить виджет меню, запустить музыку главного меню и т.д, а игра - другое состояние в котором задействуются классы змейки, карты и искуственного интеллекта.
Для игровых состояний существует интерфейс **IGameState**, который определяет базовые поля и методы, которые должны быть в каждом игровом состоянии. Его определяют два класса **MenuState** - для состояния главного меню игры и **GameState** - для состояния игры. Для идентификации состояния используется класс **StateInfo**, который содержит перечисление _**Info**_ со всеми состояниями игры, а так же информацию о том, необходимо ли заново инициализировать состояние во время переключения в менеджере.

***

### 2. Texture Manager
Менеджер текстур загружает все необходимые текстуры во время пред-загрузки игры и позволяет использовать их при необходимости. Получить текстуру можно по ID, которые представлены в константах с префиксами:
- _UI_ - пользовательский интерфейс
- _Map_ - карта игры
- _Snake_ - змейка
- _Food_ - еда

Менеджер использует вспомогательный класс **TextureLoader**, который содержит все пути до текстур и выполняет их загрузку по ID.

***

### 3. Records Manager
Менеджер рекордов, позволяет хранить и сортировать рекорды по количеству очков, поставленные игроком или ИИ.
Данный менеджер взаимодействует с **CookieService** для сохранения всех рекордов в куки и их последующей загрузкой.

***

### 4. Widget Manager
Менеджер виджетов, позволяет переключать и отображать виджеты. Виджет - это еденица пользовательского интерфейса, ее базовый функционал определен в классе **IWidget**, который хранит тип виджета, данные по умолчанию и флаг, отвечающий за то, следует ли занового инициализировать виджет во время его выбора в менеджере. Вот некоторые виджеты: **MenuWidget** - содержит интерфейс главного меню игры, логотип, кнопки начала игры, опций и рекордов; **OptionsWidget** - содержит интерфейс опций, кнопки смены управления, саунд бар и т.д.

***

### 5. Sound Manager
Менеджер звуков. Позволяет запускать и останавливать звуки от какого-то конкретного элемента или глобально и регулировать значение мастер громкости. Для запуска звуков используются перечисления с типами звуков и музыки **_Sounds_** и **_Musics_**, которые можно передать менеджеру для запуска выбранного типа звука.

***

### 6. Cookie Service
Сервис для взаимодействия с куки браузера. Имеет возможность сохранять, удалять и изменять куки. Содрежить глобальную (браузерную) и локальную версию куки, при необходимости можно взаимодействовать только с локальной версией куки либо только с глобальной.

***

### 7. Trigger Set
Набор триггеров. Класс, который отслеживает состояние триггеров (элементов управления). Использует перечисление **_Trigger_** по которому можно получить текущее состояние триггера. Например триггер UP отвечает за направление движения вверх.

***

### 8. Events Manager
Менеджер событий. Управляет генераторами событий. В игре представлен один генератор для классической змейки **SimpleSnakeEventsGenerator**. Генераторы событий создают события в игре, например появление еды, движение змейки и т.д. Менеджер событий позволяет переключать генераторы событий по ходу игры, а так же предоставляет количество милиссекунд, прошедшее с начала игры.

***

### 9. Foods Manager
Менеджер еды. Позволяет заспавнить еду на пустых координатах карты, удалить еду с карты, вернуть координаты всей еды на карте. Использует перечисление _**FoodType**_ для выбора типа еды во время спавна и класс **FoodInfo**, который содержит конструктор еды, цвет и количество очков. Например одна и та же еда может давать различное количество очков или появляться на время и иметь другой цвет, для этого существует данный класс.

### Классы игры
Остальные классы и их принципы работы описаны в комментариях в самих файлах.
- **AI** - искуственный интеллект змейки
- **GraphMap** - карта-граф содержащая информацию о каждой клетке карты
- **GraphNode** - узел карты-графа, содержит информацию о позиции узла, соседях и типе узла
- **GameObject** - общий класс для всех объектов на карте
- **SnakePart** - часть змейки, расширяет _GameObject_
- **Snake** - змейка
- **Food** - еда, расширяет _GameObject_
- **Config** - содержит поля кофигурации (громкость звука, размер холста и тайла) и основные функции для их загрузки
- **Globals** - содержит глобальные функции, которые могут потребоваться в разных классах игры
- **Bar** - элемент UI, полоска прогресса/уровня
- **MessageBox** - элемент UI, текстовое окно с сообщением. Не содержит текстур, предназначено для критических сообщений
- **Button** - элемент UI, кнопка
- **Panel** - элемент UI, панель со встроенной возможностью отобразить текст